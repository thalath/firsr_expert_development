{% extends 'base.html' %}
{% block content %}
<h2>{{ 'New Rule' if mode == 'new' else 'Edit Rule ' + rule.id }}</h2>
<form method="post" class="mt-3">
    {% if mode == 'new' %}
    <div class="mb-3">
        <label for="" class="form-label">ID</label>
        <input name="id" placeholder="r10" required class="form-control">
    </div>
    {% else %}
    <div class="mb-3">
        <label for="" class="form-label">ID</label>
        <input class="form-control" value="{{ rule.id }}" disabled>
    </div>
    {% endif %}
    
    <div class="mb-3">
        <label for="conditions" class="form-label">Conditions (commas-separated fact IDs)</label>
        <input name="conditions" id="conditions" value="{{ rule.conditions | join(', ') if rule else '' }}" placeholder="f1, f2" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="conclusion" class="form-label">Conclusion</label>
        <input name"conclusion" class="form-control" placeholder="flu" value="{{ rule.conclusion if rule else '' }}" required>
    </div>
    <div class="mb-3">
        <label for="" class="form-label">Certainty (0..1)</label>
        <input type="number" step="0.01" min="0" max="1" value="{{ rule.certainty if rule and rule.certainty is not none else 1 }}" class="form-control">
    </div>
    <div class="mb-3">
        <label for="" class="form-label">Explain (Optional)</label>
        <textarea name="explain" class="form-control" row="3">{{ rule.explain if rule else '' }}</textarea>
    </div>
    <div class="mt-3">
        <a href="{{ url_for('rules_list') }}" class="btn btn-outline-secondary">Cancel</a>
        <button class="btn btn-primary" type="submit">Save</button>
    </div> 
</form>
{% endblock %}